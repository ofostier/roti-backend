_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"+326":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c.a})),n.d(t,"c",(function(){return s.a}));var i=n("ERkP"),u=n.n(i),o=n("pQ1H"),r=n("minz");function a(){var e=u.a.useContext(Object(r.a)()).client;return Object(o.b)(e,33),e}var c=n("xiH9"),s=n("GBwV")},"/lJY":function(e,t){},DB6d:function(e,t,n){"use strict";n.r(t);var i=n("Czhu"),u=n("ERkP"),o=n("J8OT"),r=n("rkyN"),a=n("J3Wx"),c=n("4/oc"),s=n("vbS2"),l=n("ibUV"),d=n("iBAD"),b=n("xSHk");const g=({identityField:e,secretField:t,mutationName:n,successTypename:g,failureTypename:f})=>{var m,j;const p=s.gql`
    mutation($identity: String!, $secret: String!) {
      authenticate: ${n}(${e}: $identity, ${t}: $secret) {
        ... on ${g} {
          item {
            id
          }
        }
        ... on ${f} {
          message
        }
      }
    }
  `,[v,y]=Object(u.useState)("signin"),[O,h]=Object(u.useState)({identity:"",secret:""}),w=Object(u.useRef)(null);Object(u.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.focus()}),[v]);const[_,{error:q,loading:C,data:k}]=Object(s.useMutation)(p),A=Object(l.e)(),M=Object(d.b)(),S=Object(l.d)();return Object(u.useEffect)((()=>{"authenticated"===S.authenticatedItem.state&&M.push(M.query.from||"/")}),[S.authenticatedItem,M.query.from]),Object(o.n)(b.a,null,Object(o.n)(o.j,{gap:"xlarge",as:"form",onSubmit:async e=>{if(e.preventDefault(),"signin"===v){try{var t;if((null===(t=(await _({variables:{identity:O.identity,secret:O.secret}})).data.authenticate)||void 0===t?void 0:t.__typename)!==g)return}catch(n){return}A(),M.push(M.query.from||"/")}}},Object(o.n)(o.e,null,"Sign In"),q&&Object(o.n)(c.a,{title:"Error",tone:"negative"},q.message),(null===k||void 0===k||null===(m=k.authenticate)||void 0===m?void 0:m.__typename)===f&&Object(o.n)(c.a,{title:"Error",tone:"negative"},null===k||void 0===k?void 0:k.authenticate.message),Object(o.n)(o.j,{gap:"medium"},Object(o.n)(o.l,{as:"label",htmlFor:"identity"},e),Object(o.n)(a.j,{id:"identity",name:"identity",value:O.identity,onChange:e=>h(Object(i.a)(Object(i.a)({},O),{},{identity:e.target.value})),placeholder:e,ref:w}),"signin"===v&&Object(o.n)(u.Fragment,null,Object(o.n)(o.l,{as:"label",htmlFor:"password"},t),Object(o.n)(a.j,{id:"password",name:"password",value:O.secret,onChange:e=>h(Object(i.a)(Object(i.a)({},O),{},{secret:e.target.value})),placeholder:t,type:"password"}))),"forgot password"===v?Object(o.n)(o.j,{gap:"medium",across:!0},Object(o.n)(r.a,{type:"submit",weight:"bold",tone:"active"},"Log reset link"),Object(o.n)(r.a,{weight:"none",tone:"active",onClick:()=>y("signin")},"Go back")):Object(o.n)(o.j,{gap:"medium",across:!0},Object(o.n)(r.a,{weight:"bold",tone:"active",isLoading:C||(null===k||void 0===k||null===(j=k.authenticate)||void 0===j?void 0:j.__typename)===g,type:"submit"},"Sign In"))))};var f;t.default=(f={identityField:"email",secretField:"password",mutationName:"authenticateUserWithPassword",successTypename:"UserAuthenticationWithPasswordSuccess",failureTypename:"UserAuthenticationWithPasswordFailure"},()=>Object(o.n)(g,f))},TKis:function(e,t,n){"use strict";var i=n("+326");n.d(t,"useApolloClient",(function(){return i.a})),n.d(t,"useMutation",(function(){return i.b})),n.d(t,"useQuery",(function(){return i.c}));var u=n("/lJY");n.o(u,"gql")&&n.d(t,"gql",(function(){return u.gql}))},cNjw:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n("DB6d")}])},vbS2:function(e,t,n){"use strict";var i=n("x8tt");n.o(i,"gql")&&n.d(t,"gql",(function(){return i.gql})),n.o(i,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return i.useApolloClient})),n.o(i,"useMutation")&&n.d(t,"useMutation",(function(){return i.useMutation})),n.o(i,"useQuery")&&n.d(t,"useQuery",(function(){return i.useQuery}))},x8tt:function(e,t,n){"use strict";var i=n("AMm6");n.o(i,"gql")&&n.d(t,"gql",(function(){return i.gql})),n.o(i,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return i.useApolloClient})),n.o(i,"useMutation")&&n.d(t,"useMutation",(function(){return i.useMutation})),n.o(i,"useQuery")&&n.d(t,"useQuery",(function(){return i.useQuery}));var u=n("TKis");n.o(u,"gql")&&n.d(t,"gql",(function(){return u.gql})),n.o(u,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return u.useApolloClient})),n.o(u,"useMutation")&&n.d(t,"useMutation",(function(){return u.useMutation})),n.o(u,"useQuery")&&n.d(t,"useQuery",(function(){return u.useQuery}))},xSHk:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("J8OT");const u=({children:e})=>{const{colors:t,shadow:n}=Object(i.t)();return Object(i.n)(i.b,{css:{minWidth:"100vw",minHeight:"100vh",backgroundColor:t.backgroundMuted},rounding:"medium"},Object(i.n)(i.a,{css:{background:t.background,width:600,boxShadow:n.s100},margin:"medium",padding:"xlarge",rounding:"medium"},e))}}},[["cNjw",0,1,2,3,4,5]]]);