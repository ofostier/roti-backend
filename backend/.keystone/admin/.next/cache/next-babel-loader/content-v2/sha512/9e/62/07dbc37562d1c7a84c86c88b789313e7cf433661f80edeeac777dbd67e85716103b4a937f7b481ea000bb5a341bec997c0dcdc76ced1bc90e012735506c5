{"ast":null,"code":"import { relationship, select, text, timestamp } from '@keystone-next/fields'; //import { atTracking } from '@keystone-next/keystone';\n\nimport { atTracking } from '@keystonejs-contrib-next/list-plugins';\nimport { rules, isSignedIn } from '../access';\nimport { list } from '@keystone-next/keystone/schema'; //import { ProductImage } from './ProductImage';\n\nconst withAtTracking = atTracking({}); // TODO: [RR-1] Add byTracking KEYSTONE Plugin\n// Capacity to automated CreatedBy and UpdateBy\n\nexport const Roti = list( //  withAtTracking(\n{\n  // access:\n  access: {\n    create: isSignedIn,\n    read: rules.canReadRotis,\n    update: rules.canManageRotis,\n    delete: rules.canManageRotis\n  },\n  fields: {\n    subject: text({\n      isRequired: true\n    }),\n    description: text({\n      ui: {\n        displayMode: 'textarea'\n      }\n    }),\n    shorturl: text({\n      isRequired: true\n    }),\n    datecreated: timestamp({\n      //format: 'dd/MM/yyyy HH:mm O',\n      //yearPickerType: 'auto',\n      defaultValue: () => new Date().getTime()\n    }),\n    status: select({\n      options: [{\n        label: 'Draft',\n        value: 'DRAFT'\n      }, {\n        label: 'Availlable',\n        value: 'AVAILABLE'\n      }, {\n        label: 'Unavailable',\n        value: 'UNAVAILABLE '\n      }, {\n        label: 'Closed',\n        value: 'CLOSED'\n      }],\n      defaultValue: 'AVAILABLE',\n      ui: {\n        displayMode: 'segmented-control',\n        createView: {\n          fieldMode: 'hidden'\n        }\n      }\n    }),\n    user: relationship({\n      ref: 'User.rotis',\n      defaultValue: ({\n        context\n      }) => ({\n        connect: {\n          id: context.session.itemId\n        }\n      })\n    }),\n    votes: relationship({\n      ref: 'Vote.rotis',\n      many: true\n    }),\n    tags: text({\n      isRequired: false\n    }) // tags: virtual({\n    //     resolver: (item) => `TOTO`,\n    //     //graphQLReturnType: 'String',\n    // }),\n\n  } // plugins: [\n  //   atTracking(),\n  // ]\n\n} //)\n);","map":null,"metadata":{},"sourceType":"module"}