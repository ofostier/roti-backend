{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{\"+326\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return a})),n.d(t,\"b\",(function(){return c.a})),n.d(t,\"c\",(function(){return s.a}));var i=n(\"ERkP\"),u=n.n(i),o=n(\"pQ1H\"),r=n(\"minz\");function a(){var e=u.a.useContext(Object(r.a)()).client;return Object(o.b)(e,33),e}var c=n(\"xiH9\"),s=n(\"GBwV\")},\"/lJY\":function(e,t){},DB6d:function(e,t,n){\"use strict\";n.r(t);var i=n(\"Czhu\"),u=n(\"ERkP\"),o=n(\"J8OT\"),r=n(\"rkyN\"),a=n(\"J3Wx\"),c=n(\"4/oc\"),s=n(\"vbS2\"),l=n(\"ibUV\"),d=n(\"iBAD\"),b=n(\"xSHk\");const g=({identityField:e,secretField:t,mutationName:n,successTypename:g,failureTypename:f})=>{var m,j;const p=s.gql`\n    mutation($identity: String!, $secret: String!) {\n      authenticate: ${n}(${e}: $identity, ${t}: $secret) {\n        ... on ${g} {\n          item {\n            id\n          }\n        }\n        ... on ${f} {\n          message\n        }\n      }\n    }\n  `,[v,y]=Object(u.useState)(\"signin\"),[O,h]=Object(u.useState)({identity:\"\",secret:\"\"}),w=Object(u.useRef)(null);Object(u.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.focus()}),[v]);const[_,{error:q,loading:C,data:k}]=Object(s.useMutation)(p),A=Object(l.e)(),M=Object(d.b)(),S=Object(l.d)();return Object(u.useEffect)((()=>{\"authenticated\"===S.authenticatedItem.state&&M.push(M.query.from||\"/\")}),[S.authenticatedItem,M.query.from]),Object(o.n)(b.a,null,Object(o.n)(o.j,{gap:\"xlarge\",as:\"form\",onSubmit:async e=>{if(e.preventDefault(),\"signin\"===v){try{var t;if((null===(t=(await _({variables:{identity:O.identity,secret:O.secret}})).data.authenticate)||void 0===t?void 0:t.__typename)!==g)return}catch(n){return}A(),M.push(M.query.from||\"/\")}}},Object(o.n)(o.e,null,\"Sign In\"),q&&Object(o.n)(c.a,{title:\"Error\",tone:\"negative\"},q.message),(null===k||void 0===k||null===(m=k.authenticate)||void 0===m?void 0:m.__typename)===f&&Object(o.n)(c.a,{title:\"Error\",tone:\"negative\"},null===k||void 0===k?void 0:k.authenticate.message),Object(o.n)(o.j,{gap:\"medium\"},Object(o.n)(o.l,{as:\"label\",htmlFor:\"identity\"},e),Object(o.n)(a.j,{id:\"identity\",name:\"identity\",value:O.identity,onChange:e=>h(Object(i.a)(Object(i.a)({},O),{},{identity:e.target.value})),placeholder:e,ref:w}),\"signin\"===v&&Object(o.n)(u.Fragment,null,Object(o.n)(o.l,{as:\"label\",htmlFor:\"password\"},t),Object(o.n)(a.j,{id:\"password\",name:\"password\",value:O.secret,onChange:e=>h(Object(i.a)(Object(i.a)({},O),{},{secret:e.target.value})),placeholder:t,type:\"password\"}))),\"forgot password\"===v?Object(o.n)(o.j,{gap:\"medium\",across:!0},Object(o.n)(r.a,{type:\"submit\",weight:\"bold\",tone:\"active\"},\"Log reset link\"),Object(o.n)(r.a,{weight:\"none\",tone:\"active\",onClick:()=>y(\"signin\")},\"Go back\")):Object(o.n)(o.j,{gap:\"medium\",across:!0},Object(o.n)(r.a,{weight:\"bold\",tone:\"active\",isLoading:C||(null===k||void 0===k||null===(j=k.authenticate)||void 0===j?void 0:j.__typename)===g,type:\"submit\"},\"Sign In\"))))};var f;t.default=(f={identityField:\"email\",secretField:\"password\",mutationName:\"authenticateUserWithPassword\",successTypename:\"UserAuthenticationWithPasswordSuccess\",failureTypename:\"UserAuthenticationWithPasswordFailure\"},()=>Object(o.n)(g,f))},TKis:function(e,t,n){\"use strict\";var i=n(\"+326\");n.d(t,\"useApolloClient\",(function(){return i.a})),n.d(t,\"useMutation\",(function(){return i.b})),n.d(t,\"useQuery\",(function(){return i.c}));var u=n(\"/lJY\");n.o(u,\"gql\")&&n.d(t,\"gql\",(function(){return u.gql}))},cNjw:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return n(\"DB6d\")}])},vbS2:function(e,t,n){\"use strict\";var i=n(\"x8tt\");n.o(i,\"gql\")&&n.d(t,\"gql\",(function(){return i.gql})),n.o(i,\"useApolloClient\")&&n.d(t,\"useApolloClient\",(function(){return i.useApolloClient})),n.o(i,\"useMutation\")&&n.d(t,\"useMutation\",(function(){return i.useMutation})),n.o(i,\"useQuery\")&&n.d(t,\"useQuery\",(function(){return i.useQuery}))},x8tt:function(e,t,n){\"use strict\";var i=n(\"AMm6\");n.o(i,\"gql\")&&n.d(t,\"gql\",(function(){return i.gql})),n.o(i,\"useApolloClient\")&&n.d(t,\"useApolloClient\",(function(){return i.useApolloClient})),n.o(i,\"useMutation\")&&n.d(t,\"useMutation\",(function(){return i.useMutation})),n.o(i,\"useQuery\")&&n.d(t,\"useQuery\",(function(){return i.useQuery}));var u=n(\"TKis\");n.o(u,\"gql\")&&n.d(t,\"gql\",(function(){return u.gql})),n.o(u,\"useApolloClient\")&&n.d(t,\"useApolloClient\",(function(){return u.useApolloClient})),n.o(u,\"useMutation\")&&n.d(t,\"useMutation\",(function(){return u.useMutation})),n.o(u,\"useQuery\")&&n.d(t,\"useQuery\",(function(){return u.useQuery}))},xSHk:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return u}));var i=n(\"J8OT\");const u=({children:e})=>{const{colors:t,shadow:n}=Object(i.t)();return Object(i.n)(i.b,{css:{minWidth:\"100vw\",minHeight:\"100vh\",backgroundColor:t.backgroundMuted},rounding:\"medium\"},Object(i.n)(i.a,{css:{background:t.background,width:600,boxShadow:n.s100},margin:\"medium\",padding:\"xlarge\",rounding:\"medium\"},e))}}},[[\"cNjw\",0,1,2,3,4,5]]]);","map":{"version":3,"sources":["static/chunks/pages/signin-5189a253abe69ebfdd47.js"],"names":["_N_E","window","push","+326","module","__webpack_exports__","__webpack_require__","d","useApolloClient","useMutation","useQuery","react","react_default","n","invariant_esm","ApolloContext","client","a","useContext","Object","/lJY","exports","DB6d","r","objectSpread2","core_esm","button_esm","fields_esm","notice_esm","keystone_esm","dist_keystone_esm","router_dist_keystone_esm","SigninContainer_189375b7_esm","SigninPage","identityField","secretField","mutationName","successTypename","failureTypename","_data$authenticate","_data$authenticate2","mutation","mode","setMode","state","setState","identity","secret","identityFieldRef","_identityFieldRef$cur","current","focus","mutate","error","loading","data","reinitContext","router","rawKeystone","authenticatedItem","query","from","gap","as","onSubmit","async","event","preventDefault","_result$data$authenti","variables","authenticate","__typename","err","title","tone","message","htmlFor","id","name","value","onChange","e","target","placeholder","ref","type","across","weight","onClick","isLoading","props","TKis","_hooks_index_js__WEBPACK_IMPORTED_MODULE_0__","_types_types_js__WEBPACK_IMPORTED_MODULE_1__","o","cNjw","__NEXT_P","vbS2","_apollo_client__WEBPACK_IMPORTED_MODULE_0__","x8tt","_core_index_js__WEBPACK_IMPORTED_MODULE_0__","_react_index_js__WEBPACK_IMPORTED_MODULE_1__","xSHk","SigninContainer","_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__","children","colors","shadow","css","minWidth","minHeight","backgroundColor","backgroundMuted","rounding","background","width","boxShadow","s100","margin","padding"],"mappings":"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"},"name":"static/chunks/pages/signin-5189a253abe69ebfdd47.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[19],{\n\n/***/ \"+326\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ useApolloClient; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* reexport */ useMutation[\"a\" /* useMutation */]; });\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* reexport */ useQuery[\"a\" /* useQuery */]; });\n\n// UNUSED EXPORTS: useLazyQuery, useSubscription, useReactiveVar\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/react/index.js\nvar react = __webpack_require__(\"ERkP\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/node_modules/ts-invariant/lib/invariant.esm.js\nvar invariant_esm = __webpack_require__(\"pQ1H\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/context/ApolloContext.js\nvar ApolloContext = __webpack_require__(\"minz\");\n\n// CONCATENATED MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/useApolloClient.js\n\n\n\nfunction useApolloClient() {\n    var client = react_default.a.useContext(Object(ApolloContext[\"a\" /* getApolloContext */])()).client;\n     true ? Object(invariant_esm[\"b\" /* invariant */])(client, 33) : undefined;\n    return client;\n}\n//# sourceMappingURL=useApolloClient.js.map\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/useMutation.js + 1 modules\nvar useMutation = __webpack_require__(\"xiH9\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/useQuery.js\nvar useQuery = __webpack_require__(\"GBwV\");\n\n// CONCATENATED MODULE: /Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/index.js\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n\n/***/ }),\n\n/***/ \"/lJY\":\n/***/ (function(module, exports) {\n\n//# sourceMappingURL=types.js.map\n\n/***/ }),\n\n/***/ \"DB6d\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(\"Czhu\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/react/index.js\nvar react = __webpack_require__(\"ERkP\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-ui/core/dist/core.esm.js + 1 modules\nvar core_esm = __webpack_require__(\"J8OT\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-ui/button/dist/button.esm.js + 1 modules\nvar button_esm = __webpack_require__(\"rkyN\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-ui/fields/dist/fields.esm.js + 8 modules\nvar fields_esm = __webpack_require__(\"J3Wx\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-ui/notice/dist/notice.esm.js + 7 modules\nvar notice_esm = __webpack_require__(\"4/oc\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-next/keystone/admin-ui/apollo/dist/keystone.esm.js\nvar keystone_esm = __webpack_require__(\"vbS2\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-next/keystone/admin-ui/context/dist/keystone.esm.js\nvar dist_keystone_esm = __webpack_require__(\"ibUV\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-next/keystone/admin-ui/router/dist/keystone.esm.js\nvar router_dist_keystone_esm = __webpack_require__(\"iBAD\");\n\n// EXTERNAL MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-next/auth/dist/SigninContainer-189375b7.esm.js\nvar SigninContainer_189375b7_esm = __webpack_require__(\"xSHk\");\n\n// CONCATENATED MODULE: /Users/131562/react_project/roti-backend/node_modules/@keystone-next/auth/pages/SigninPage/dist/auth.esm.js\n\n\n\n\n\n\n\n\n\n\n\nconst getSigninPage = props => () => Object(core_esm[\"n\" /* jsx */])(SigninPage, props);\nconst SigninPage = ({\n  identityField,\n  secretField,\n  mutationName,\n  successTypename,\n  failureTypename\n}) => {\n  var _data$authenticate, _data$authenticate2;\n\n  const mutation = keystone_esm[\"gql\"]`\n    mutation($identity: String!, $secret: String!) {\n      authenticate: ${mutationName}(${identityField}: $identity, ${secretField}: $secret) {\n        ... on ${successTypename} {\n          item {\n            id\n          }\n        }\n        ... on ${failureTypename} {\n          message\n        }\n      }\n    }\n  `;\n  const [mode, setMode] = Object(react[\"useState\"])('signin');\n  const [state, setState] = Object(react[\"useState\"])({\n    identity: '',\n    secret: ''\n  });\n  const identityFieldRef = Object(react[\"useRef\"])(null);\n  Object(react[\"useEffect\"])(() => {\n    var _identityFieldRef$cur;\n\n    (_identityFieldRef$cur = identityFieldRef.current) === null || _identityFieldRef$cur === void 0 ? void 0 : _identityFieldRef$cur.focus();\n  }, [mode]);\n  const [mutate, {\n    error,\n    loading,\n    data\n  }] = Object(keystone_esm[\"useMutation\"])(mutation);\n  const reinitContext = Object(dist_keystone_esm[\"e\" /* useReinitContext */])();\n  const router = Object(router_dist_keystone_esm[\"b\" /* useRouter */])();\n  const rawKeystone = Object(dist_keystone_esm[\"d\" /* useRawKeystone */])();\n  Object(react[\"useEffect\"])(() => {\n    if (rawKeystone.authenticatedItem.state === 'authenticated') {\n      router.push(router.query.from || '/');\n    }\n  }, [rawKeystone.authenticatedItem, router.query.from]);\n  return Object(core_esm[\"n\" /* jsx */])(SigninContainer_189375b7_esm[\"a\" /* S */], null, Object(core_esm[\"n\" /* jsx */])(core_esm[\"j\" /* Stack */], {\n    gap: \"xlarge\",\n    as: \"form\",\n    onSubmit: async event => {\n      event.preventDefault();\n\n      if (mode === 'signin') {\n        try {\n          var _result$data$authenti;\n\n          let result = await mutate({\n            variables: {\n              identity: state.identity,\n              secret: state.secret\n            }\n          });\n\n          if (((_result$data$authenti = result.data.authenticate) === null || _result$data$authenti === void 0 ? void 0 : _result$data$authenti.__typename) !== successTypename) {\n            return;\n          }\n        } catch (err) {\n          return;\n        }\n\n        reinitContext();\n        router.push(router.query.from || '/');\n      }\n    }\n  }, Object(core_esm[\"n\" /* jsx */])(core_esm[\"e\" /* H1 */], null, \"Sign In\"), error && Object(core_esm[\"n\" /* jsx */])(notice_esm[\"a\" /* Notice */], {\n    title: \"Error\",\n    tone: \"negative\"\n  }, error.message), (data === null || data === void 0 ? void 0 : (_data$authenticate = data.authenticate) === null || _data$authenticate === void 0 ? void 0 : _data$authenticate.__typename) === failureTypename && Object(core_esm[\"n\" /* jsx */])(notice_esm[\"a\" /* Notice */], {\n    title: \"Error\",\n    tone: \"negative\"\n  }, data === null || data === void 0 ? void 0 : data.authenticate.message), Object(core_esm[\"n\" /* jsx */])(core_esm[\"j\" /* Stack */], {\n    gap: \"medium\"\n  }, Object(core_esm[\"n\" /* jsx */])(core_esm[\"l\" /* VisuallyHidden */], {\n    as: \"label\",\n    htmlFor: \"identity\"\n  }, identityField), Object(core_esm[\"n\" /* jsx */])(fields_esm[\"j\" /* TextInput */], {\n    id: \"identity\",\n    name: \"identity\",\n    value: state.identity,\n    onChange: e => setState(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, state), {}, {\n      identity: e.target.value\n    })),\n    placeholder: identityField,\n    ref: identityFieldRef\n  }), mode === 'signin' && Object(core_esm[\"n\" /* jsx */])(react[\"Fragment\"], null, Object(core_esm[\"n\" /* jsx */])(core_esm[\"l\" /* VisuallyHidden */], {\n    as: \"label\",\n    htmlFor: \"password\"\n  }, secretField), Object(core_esm[\"n\" /* jsx */])(fields_esm[\"j\" /* TextInput */], {\n    id: \"password\",\n    name: \"password\",\n    value: state.secret,\n    onChange: e => setState(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, state), {}, {\n      secret: e.target.value\n    })),\n    placeholder: secretField,\n    type: \"password\"\n  }))), mode === 'forgot password' ? Object(core_esm[\"n\" /* jsx */])(core_esm[\"j\" /* Stack */], {\n    gap: \"medium\",\n    across: true\n  }, Object(core_esm[\"n\" /* jsx */])(button_esm[\"a\" /* Button */], {\n    type: \"submit\",\n    weight: \"bold\",\n    tone: \"active\"\n  }, \"Log reset link\"), Object(core_esm[\"n\" /* jsx */])(button_esm[\"a\" /* Button */], {\n    weight: \"none\",\n    tone: \"active\",\n    onClick: () => setMode('signin')\n  }, \"Go back\")) : Object(core_esm[\"n\" /* jsx */])(core_esm[\"j\" /* Stack */], {\n    gap: \"medium\",\n    across: true\n  }, Object(core_esm[\"n\" /* jsx */])(button_esm[\"a\" /* Button */], {\n    weight: \"bold\",\n    tone: \"active\",\n    isLoading: loading || // this is for while the page is loading but the mutation has finished successfully\n    (data === null || data === void 0 ? void 0 : (_data$authenticate2 = data.authenticate) === null || _data$authenticate2 === void 0 ? void 0 : _data$authenticate2.__typename) === successTypename,\n    type: \"submit\"\n  }, \"Sign In\"))));\n};\n\n\n\n// CONCATENATED MODULE: ./pages/signin.js\n\n/* harmony default export */ var signin = __webpack_exports__[\"default\"] = (getSigninPage({\n  identityField: 'email',\n  secretField: 'password',\n  mutationName: 'authenticateUserWithPassword',\n  successTypename: 'UserAuthenticationWithPasswordSuccess',\n  failureTypename: 'UserAuthenticationWithPasswordFailure'\n}));\n\n/***/ }),\n\n/***/ \"TKis\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _hooks_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"+326\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"useApolloClient\", function() { return _hooks_index_js__WEBPACK_IMPORTED_MODULE_0__[\"a\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"useMutation\", function() { return _hooks_index_js__WEBPACK_IMPORTED_MODULE_0__[\"b\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"useQuery\", function() { return _hooks_index_js__WEBPACK_IMPORTED_MODULE_0__[\"c\"]; });\n\n/* harmony import */ var _types_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/lJY\");\n/* harmony import */ var _types_types_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_types_types_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony reexport (checked) */ if(__webpack_require__.o(_types_types_js__WEBPACK_IMPORTED_MODULE_1__, \"gql\")) __webpack_require__.d(__webpack_exports__, \"gql\", function() { return _types_types_js__WEBPACK_IMPORTED_MODULE_1__[\"gql\"]; });\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n\n/***/ }),\n\n/***/ \"cNjw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/signin\",\n      function () {\n        return __webpack_require__(\"DB6d\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"vbS2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"x8tt\");\n/* harmony reexport (checked) */ if(__webpack_require__.o(_apollo_client__WEBPACK_IMPORTED_MODULE_0__, \"gql\")) __webpack_require__.d(__webpack_exports__, \"gql\", function() { return _apollo_client__WEBPACK_IMPORTED_MODULE_0__[\"gql\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_apollo_client__WEBPACK_IMPORTED_MODULE_0__, \"useApolloClient\")) __webpack_require__.d(__webpack_exports__, \"useApolloClient\", function() { return _apollo_client__WEBPACK_IMPORTED_MODULE_0__[\"useApolloClient\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_apollo_client__WEBPACK_IMPORTED_MODULE_0__, \"useMutation\")) __webpack_require__.d(__webpack_exports__, \"useMutation\", function() { return _apollo_client__WEBPACK_IMPORTED_MODULE_0__[\"useMutation\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_apollo_client__WEBPACK_IMPORTED_MODULE_0__, \"useQuery\")) __webpack_require__.d(__webpack_exports__, \"useQuery\", function() { return _apollo_client__WEBPACK_IMPORTED_MODULE_0__[\"useQuery\"]; });\n\n\n\n\n/***/ }),\n\n/***/ \"x8tt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"AMm6\");\n/* harmony reexport (checked) */ if(__webpack_require__.o(_core_index_js__WEBPACK_IMPORTED_MODULE_0__, \"gql\")) __webpack_require__.d(__webpack_exports__, \"gql\", function() { return _core_index_js__WEBPACK_IMPORTED_MODULE_0__[\"gql\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_core_index_js__WEBPACK_IMPORTED_MODULE_0__, \"useApolloClient\")) __webpack_require__.d(__webpack_exports__, \"useApolloClient\", function() { return _core_index_js__WEBPACK_IMPORTED_MODULE_0__[\"useApolloClient\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_core_index_js__WEBPACK_IMPORTED_MODULE_0__, \"useMutation\")) __webpack_require__.d(__webpack_exports__, \"useMutation\", function() { return _core_index_js__WEBPACK_IMPORTED_MODULE_0__[\"useMutation\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_core_index_js__WEBPACK_IMPORTED_MODULE_0__, \"useQuery\")) __webpack_require__.d(__webpack_exports__, \"useQuery\", function() { return _core_index_js__WEBPACK_IMPORTED_MODULE_0__[\"useQuery\"]; });\n\n/* harmony import */ var _react_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"TKis\");\n/* harmony reexport (checked) */ if(__webpack_require__.o(_react_index_js__WEBPACK_IMPORTED_MODULE_1__, \"gql\")) __webpack_require__.d(__webpack_exports__, \"gql\", function() { return _react_index_js__WEBPACK_IMPORTED_MODULE_1__[\"gql\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_react_index_js__WEBPACK_IMPORTED_MODULE_1__, \"useApolloClient\")) __webpack_require__.d(__webpack_exports__, \"useApolloClient\", function() { return _react_index_js__WEBPACK_IMPORTED_MODULE_1__[\"useApolloClient\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_react_index_js__WEBPACK_IMPORTED_MODULE_1__, \"useMutation\")) __webpack_require__.d(__webpack_exports__, \"useMutation\", function() { return _react_index_js__WEBPACK_IMPORTED_MODULE_1__[\"useMutation\"]; });\n\n/* harmony reexport (checked) */ if(__webpack_require__.o(_react_index_js__WEBPACK_IMPORTED_MODULE_1__, \"useQuery\")) __webpack_require__.d(__webpack_exports__, \"useQuery\", function() { return _react_index_js__WEBPACK_IMPORTED_MODULE_1__[\"useQuery\"]; });\n\n\n\n//# sourceMappingURL=index.js.map\n\n/***/ }),\n\n/***/ \"xSHk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SigninContainer; });\n/* harmony import */ var _keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"J8OT\");\n\n\n/* @jsx jsx */\nconst SigninContainer = ({\n  children\n}) => {\n  const {\n    colors,\n    shadow\n  } = Object(_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* useTheme */ \"t\"])();\n  return Object(_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* jsx */ \"n\"])(_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* Center */ \"b\"], {\n    css: {\n      minWidth: '100vw',\n      minHeight: '100vh',\n      backgroundColor: colors.backgroundMuted\n    },\n    rounding: \"medium\"\n  }, Object(_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* jsx */ \"n\"])(_keystone_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* Box */ \"a\"], {\n    css: {\n      background: colors.background,\n      width: 600,\n      boxShadow: shadow.s100\n    },\n    margin: \"medium\",\n    padding: \"xlarge\",\n    rounding: \"medium\"\n  }, children));\n};\n\n\n\n\n/***/ })\n\n},[[\"cNjw\",0,1,2,3,4,5]]]);","inputSourceMap":{"version":3,"sources":["/Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/useApolloClient.js","/Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/hooks/index.js","/Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/types/types.js","/Users/131562/react_project/roti-backend/node_modules/@keystone-next/auth/pages/SigninPage/dist/auth.esm.js","/Users/131562/react_project/roti-backend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--5!/Users/131562/react_project/roti-backend/.keystone/admin/pages/signin.js","/Users/131562/react_project/roti-backend/node_modules/@apollo/client/react/index.js","/Users/131562/react_project/roti-backend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fsignin&absolutePagePath=private-next-pages%2Fsignin.js!","/Users/131562/react_project/roti-backend/node_modules/@keystone-next/keystone/admin-ui/apollo/dist/keystone.esm.js","/Users/131562/react_project/roti-backend/node_modules/@apollo/client/index.js","/Users/131562/react_project/roti-backend/node_modules/@keystone-next/auth/dist/SigninContainer-189375b7.esm.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import React from 'react';\nimport { invariant } from 'ts-invariant';\nimport { getApolloContext } from \"../context/index.js\";\nexport function useApolloClient() {\n    var client = React.useContext(getApolloContext()).client;\n    process.env.NODE_ENV === \"production\" ? invariant(client, 33) : invariant(client, 'No Apollo Client instance can be found. Please ensure that you ' +\n        'have called `ApolloProvider` higher up in your tree.');\n    return client;\n}\n//# sourceMappingURL=useApolloClient.js.map","export * from \"./useApolloClient.js\";\nexport * from \"./useLazyQuery.js\";\nexport * from \"./useMutation.js\";\nexport * from \"./useQuery.js\";\nexport * from \"./useSubscription.js\";\nexport * from \"./useReactiveVar.js\";\n//# sourceMappingURL=index.js.map","//# sourceMappingURL=types.js.map","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport { useState, useRef, useEffect, Fragment } from 'react';\nimport { jsx, Stack, H1, VisuallyHidden } from '@keystone-ui/core';\nimport { Button } from '@keystone-ui/button';\nimport { TextInput } from '@keystone-ui/fields';\nimport { Notice } from '@keystone-ui/notice';\nimport { gql, useMutation } from '@keystone-next/keystone/admin-ui/apollo';\nimport { useReinitContext, useRawKeystone } from '@keystone-next/keystone/admin-ui/context';\nimport { useRouter } from '@keystone-next/keystone/admin-ui/router';\nimport { S as SigninContainer } from '../../../dist/SigninContainer-189375b7.esm.js';\n\nconst getSigninPage = props => () => jsx(SigninPage, props);\nconst SigninPage = ({\n  identityField,\n  secretField,\n  mutationName,\n  successTypename,\n  failureTypename\n}) => {\n  var _data$authenticate, _data$authenticate2;\n\n  const mutation = gql`\n    mutation($identity: String!, $secret: String!) {\n      authenticate: ${mutationName}(${identityField}: $identity, ${secretField}: $secret) {\n        ... on ${successTypename} {\n          item {\n            id\n          }\n        }\n        ... on ${failureTypename} {\n          message\n        }\n      }\n    }\n  `;\n  const [mode, setMode] = useState('signin');\n  const [state, setState] = useState({\n    identity: '',\n    secret: ''\n  });\n  const identityFieldRef = useRef(null);\n  useEffect(() => {\n    var _identityFieldRef$cur;\n\n    (_identityFieldRef$cur = identityFieldRef.current) === null || _identityFieldRef$cur === void 0 ? void 0 : _identityFieldRef$cur.focus();\n  }, [mode]);\n  const [mutate, {\n    error,\n    loading,\n    data\n  }] = useMutation(mutation);\n  const reinitContext = useReinitContext();\n  const router = useRouter();\n  const rawKeystone = useRawKeystone();\n  useEffect(() => {\n    if (rawKeystone.authenticatedItem.state === 'authenticated') {\n      router.push(router.query.from || '/');\n    }\n  }, [rawKeystone.authenticatedItem, router.query.from]);\n  return jsx(SigninContainer, null, jsx(Stack, {\n    gap: \"xlarge\",\n    as: \"form\",\n    onSubmit: async event => {\n      event.preventDefault();\n\n      if (mode === 'signin') {\n        try {\n          var _result$data$authenti;\n\n          let result = await mutate({\n            variables: {\n              identity: state.identity,\n              secret: state.secret\n            }\n          });\n\n          if (((_result$data$authenti = result.data.authenticate) === null || _result$data$authenti === void 0 ? void 0 : _result$data$authenti.__typename) !== successTypename) {\n            return;\n          }\n        } catch (err) {\n          return;\n        }\n\n        reinitContext();\n        router.push(router.query.from || '/');\n      }\n    }\n  }, jsx(H1, null, \"Sign In\"), error && jsx(Notice, {\n    title: \"Error\",\n    tone: \"negative\"\n  }, error.message), (data === null || data === void 0 ? void 0 : (_data$authenticate = data.authenticate) === null || _data$authenticate === void 0 ? void 0 : _data$authenticate.__typename) === failureTypename && jsx(Notice, {\n    title: \"Error\",\n    tone: \"negative\"\n  }, data === null || data === void 0 ? void 0 : data.authenticate.message), jsx(Stack, {\n    gap: \"medium\"\n  }, jsx(VisuallyHidden, {\n    as: \"label\",\n    htmlFor: \"identity\"\n  }, identityField), jsx(TextInput, {\n    id: \"identity\",\n    name: \"identity\",\n    value: state.identity,\n    onChange: e => setState(_objectSpread(_objectSpread({}, state), {}, {\n      identity: e.target.value\n    })),\n    placeholder: identityField,\n    ref: identityFieldRef\n  }), mode === 'signin' && jsx(Fragment, null, jsx(VisuallyHidden, {\n    as: \"label\",\n    htmlFor: \"password\"\n  }, secretField), jsx(TextInput, {\n    id: \"password\",\n    name: \"password\",\n    value: state.secret,\n    onChange: e => setState(_objectSpread(_objectSpread({}, state), {}, {\n      secret: e.target.value\n    })),\n    placeholder: secretField,\n    type: \"password\"\n  }))), mode === 'forgot password' ? jsx(Stack, {\n    gap: \"medium\",\n    across: true\n  }, jsx(Button, {\n    type: \"submit\",\n    weight: \"bold\",\n    tone: \"active\"\n  }, \"Log reset link\"), jsx(Button, {\n    weight: \"none\",\n    tone: \"active\",\n    onClick: () => setMode('signin')\n  }, \"Go back\")) : jsx(Stack, {\n    gap: \"medium\",\n    across: true\n  }, jsx(Button, {\n    weight: \"bold\",\n    tone: \"active\",\n    isLoading: loading || // this is for while the page is loading but the mutation has finished successfully\n    (data === null || data === void 0 ? void 0 : (_data$authenticate2 = data.authenticate) === null || _data$authenticate2 === void 0 ? void 0 : _data$authenticate2.__typename) === successTypename,\n    type: \"submit\"\n  }, \"Sign In\"))));\n};\n\nexport { SigninPage, getSigninPage };\n","import { getSigninPage } from '@keystone-next/auth/pages/SigninPage';\nexport default getSigninPage({\n  identityField: 'email',\n  secretField: 'password',\n  mutationName: 'authenticateUserWithPassword',\n  successTypename: 'UserAuthenticationWithPasswordSuccess',\n  failureTypename: 'UserAuthenticationWithPasswordFailure'\n});","export { ApolloProvider, ApolloConsumer, getApolloContext, resetApolloContext } from \"./context/index.js\";\nexport * from \"./hooks/index.js\";\nexport { DocumentType, operationName, parser } from \"./parser/index.js\";\nexport * from \"./types/types.js\";\n//# sourceMappingURL=index.js.map","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/signin\",\n      function () {\n        return require(\"private-next-pages/signin.js\");\n      }\n    ]);\n  ","export * from '@apollo/client';\n","export * from \"./core/index.js\";\nexport * from \"./react/index.js\";\n//# sourceMappingURL=index.js.map","import { useTheme, jsx, Center, Box } from '@keystone-ui/core';\n\n/* @jsx jsx */\nconst SigninContainer = ({\n  children\n}) => {\n  const {\n    colors,\n    shadow\n  } = useTheme();\n  return jsx(Center, {\n    css: {\n      minWidth: '100vw',\n      minHeight: '100vh',\n      backgroundColor: colors.backgroundMuted\n    },\n    rounding: \"medium\"\n  }, jsx(Box, {\n    css: {\n      background: colors.background,\n      width: 600,\n      boxShadow: shadow.s100\n    },\n    margin: \"medium\",\n    padding: \"xlarge\",\n    rounding: \"medium\"\n  }, children));\n};\n\nexport { SigninContainer as S };\n"]}}